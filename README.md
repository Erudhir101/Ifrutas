# IFrutas - Grupo 04

**Integrantes** 
- Gabriel Silva Carneiro - UC24102261
- Gabriel Queiroz de Souza - UC23200732
- Ian Ferreira Campos - UC23200707
- Priscila Pereira Nunes - UC24101571
- Vinícius Dias Santos Canedo - UC23102708

## Execução do Projeto

Instalar o Projeto com **GIT**
```bash
git clone https://github.com/Erudhir101/Ifrutas.git
```
Vá para dentro do **Projeto**
```bash
cd /IFrutas
```
Instale todas as **dependências**
```bash
npm install
```
execute o projeto com **Expo**
```bash
npx expo start
```

## Exemplo de cadastros que estão funcionando
- Comprador:
  - email: teste@teste.com
  - senha: Testes
- Entregador: 
  - email: eru@gmail.com
  - senha: Qwerty
- Vendedor: 
  - email: testando@gmail.com
  - senha: testando
 
## SQL das Tabelas
```sql
-- Tabela dos Produtos
create table public.products (
  id bigint generated by default as identity not null,
  name text null,
  description text null,
  price double precision null,
  amount smallint null,
  image text null,
  available boolean null,
  seller uuid null,
  created_at timestamp with time zone not null default now(),
  updated_at timestamp without time zone not null default now(),
  category public.categoryEnum null,
  measure public.measureEnum null,
  constraint product_pkey primary key (id),
  constraint product_seller_fkey foreign KEY (seller) references profiles (id)
) TABLESPACE pg_default;

-- Tabela Dos Usuários
create table public.profiles (
  id uuid not null default gen_random_uuid (),
  full_name text null,
  avatar_url text null,
  user_type public.userEnum null,
  endereco text null,
  telefone text null,
  constraint profiles_pkey primary key (id),
  constraint profiles_id_fkey foreign KEY (id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;

-- Tabela dos Itens dos Pedidos
create table public.purchase_products (
  id uuid not null default gen_random_uuid (),
  purchase_id uuid null,
  product_id bigint null,
  quantity integer not null,
  constraint purchase_products_pkey primary key (id),
  constraint purchase_products_product_id_fkey foreign KEY (product_id) references products (id) on delete CASCADE,
  constraint purchase_products_purchase_id_fkey foreign KEY (purchase_id) references purchases (id) on delete CASCADE
) TABLESPACE pg_default;

-- Tabela da relação do Pedido com os Compradores e Vendedores
create table public.purchases (
  id uuid not null default gen_random_uuid (),
  buyer_id uuid null,
  store_id uuid null,
  is_paid boolean null default false,
  is_delivered boolean null default false,
  created_at timestamp without time zone null default now(),
  updated_at timestamp without time zone null default now(),
  constraint purchases_pkey primary key (id),
  constraint purchases_buyer_id_fkey foreign KEY (buyer_id) references profiles (id) on delete CASCADE,
  constraint purchases_store_id_fkey foreign KEY (store_id) references profiles (id) on delete CASCADE
) TABLESPACE pg_default;

-- Tabela dos Reviews
create table public.reviews (
  id bigint generated by default as identity not null,
  user_id uuid null,
  prof_id uuid null,
  review text null,
  stars smallint null,
  created_at timestamp with time zone not null default now(),
  constraint reviews_pkey primary key (id),
  constraint reviews_prof_id_fkey foreign KEY (prof_id) references profiles (id),
  constraint reviews_user_id_fkey foreign KEY (user_id) references profiles (id)
) TABLESPACE pg_default;

-- Tabela de Rota dos Produtos
create table public.tracking (
  id uuid not null default gen_random_uuid (),
  purchase_id uuid null,
  delivery_person_id uuid null,
  status text null default 'pendente'::text,
  last_location jsonb null,
  estimated_time interval null,
  created_at timestamp without time zone null default now(),
  updated_at timestamp without time zone null default now(),
  constraint tracking_pkey primary key (id),
  constraint tracking_delivery_person_id_fkey foreign KEY (delivery_person_id) references profiles (id) on delete set null,
  constraint tracking_purchase_id_fkey foreign KEY (purchase_id) references purchases (id) on delete CASCADE,
  constraint tracking_status_check check (
    (
      status = any (
        array[
          'pendente'::text,
          'em_transito'::text,
          'entregue'::text,
          'cancelada'::text
        ]
      )
    )
  )
) TABLESPACE pg_default;

-- Tabela de Veículos dos Entregadores
create table public.vehicles (
  id bigint generated by default as identity not null,
  model text null,
  brand text null,
  plate text null,
  year smallint null,
  type public.vehicleEnum null,
  id_deliveryman uuid null,
  constraint vehicles_pkey primary key (id),
  constraint vehicles_id_deliveryman_fkey foreign KEY (id_deliveryman) references profiles (id)
) TABLESPACE pg_default;
```

